
SVG Suite v0.5α for CotEditor
================================================

**本スクリプト・スイートはα版です。理解の上での利用をお願いするとともに、積極的なフィードバックを頂けると幸いです。**

SVG編集のためのCotEditor用のスクリプトセットです。

SVGの *カラーリング定義ファイル* 、SafariをSVGプレビューワ代わりに使う *Preview* 機能をはじめとして、
*svgz形式への書き出し* 、W3Cでの *バリテーション* 、base64エンコードをした *画像の挿入* 、 *テンプレート* など
CotEditorでSVGを編集する際にたいへん便利なスクリプトが詰まっています。

CotEditorをSVGエディタとして使う、そんなクリエティブ・ライフを応援するスクリプト・スイートです。

![スクリーンショット](https://github.com/1024jp/svg-coteditor/raw/master/screenshot.png)


内容物
----------------------------------------------------
- hallo.svg       —— お試し用のSVGデータ
- README.md       —— 説明書（この書類）
- screenshot.png  —— スクリーンショット
- SVG/            —— スクリプトセット
- SVG.plist       —— カラーリング・シンタックス定義（作者サイトにて単独で配布しているものと同一）


インストール
----------------------------------------------------
### インストール
#### SVG/ (スクリプトセット)
CotEditorのスクリプトメニューから「スクリプトフォルダを開く」を選択するとFinderでScriptMenuフォルダが開きます。
そのScriptMenuにSVGフォルダをまるごと移動させた後「スクリプトメニューを更新」を実行してください。
以降はスクリプトメニューから、もしくはお好みのキーアサインを割り当ててご利用ください。

#### SVG.plist (カラーリング・シンタックス定義)
CotEditorの環境設定から
	シンタックス > シンタックススタイル > 読み込み
で、SVG.plistを読み込んでください。

### アンインストール
ScriptMenuからSVGフォルダを取り除いてください。
シンタックス定義は環境設定から削除できます。


使い方・各機能説明
----------------------------------------------------
基本的にはCotEditorでSVGを編集しながら⌘S（保存）と⇧⌘R（プレビュー）で随時変更を確認する、という使い方を想定しています。そのままSVGZ形式に出力できるためInkscapeやIllustratorが出力したSVGファイルの最後のクリーンナップにも最適です。

本スクリプト・スイートではプレビューにSafariを用いています。OS Xでは10.7現在まだPreview.appでSVGを開くことができません。ひるがえって、Safariで美しいSVGレンダリングが望めるとともにアニメーション等もリアルタイムで確認ができます。そもそもウェブ向けに開発されたSVGの最終出力先であろうwebブラウザでの見た目を確認しながら自分の手になじんだテキストエディタでドキュメントが編集できることは大変理にかなっていると考えます。
ただし、各ブラウザごとに実装の違いがあるため、Firefox、Operaでのオープンもできるようにしてあります。とくに`<filter>`まわりの実装は後者2ブラウザの方が適しています。


### New Document
既にテンプレートが挿入されている新しいSVGドキュメントを開きます。

### Preview
編集中のSVGファイルをSafariを用いてプレビューします。プレビューされる画像は *最後に保存した時点* のものです。
既にプレビューウィンドウが開いている場合は実行するとその内容が更新されます。 
Command + Shift + R がショートカットキーとして割り振られています。

SafariのJavaScriptが有効になっている必要があります。無効の際には単純に新しいウィンドウでSVG画像を表示します。

カラーリング・シンタックスがSVGのときのみ有効です（変更可）。

### Validate on W3C
[W3C Markup Validation Service](http://validator.w3.org/)を用いて編集中のファイルをバリデート(検証)し結果をダイアログで返します。
さらに Show Details で詳細結果をウェブブラウザで表示します。

インターネットに接続している必要があります。

このスクリプトはHTMLなどのSVG以外のファイルにも使えます（CSS検証サービスはカバーしていません）。


### Export to/
編集中のSVGファイルを別のフォーマットで書き出します。

### Open in Inkscape
編集中のSVGファイルをInkscapeで開きます。

### Open in Firefox / Opera
編集中のファイルをそれぞれFirefox, Operaで開きます。

このスクリプトはHTMLなどのSVG以外のファイルにも使えます。

### Embed Image...
任意の画像ファイルをbase64エンコードし、imageタグとしてキャレット位置に挿入します。

### Templates/
それぞれ便利な定型句のテンプレートを挿入します。

※ `<filter>`効果はSafariが現時点(5.1.3)で対応していないのでプレビューには反映されません。
（最新のFirefox,Operaは比較的しっかりと解釈します）


カスタマイズ
----------------------------------------------------
いくつかのスクリプトではファイル内の値を書き換えることで設定が可能です。

###スクリプト全般
#### ショートカットキー
CotEditorスクリプトのショートカットキーはファイル名を変更することで設定可能です。
デフォルトではPreviewにのみ Command + Shift + R がショートカットキーとして割り振られています。
詳しくはCotEditorのヘルプを参照してください。

#### スクリプト名
スクリプトのファイル名を変更することでスクリプトメニューでの表記を変えることができます。
*現時点では*ファイルに依存関係はないので、お好みでわかりやすい名前に書き換えてください。

いらないスクリプトを削除したり
ディレクトリを移動させる（例えばValidate on W3C を ScriptMenuの最上階層に）のも問題ないです。

### New Document で設定可能な値
- `insertTitleTag`,`insertStyleTag`,`insertDefsTag`

	それぞれタグをテンプレートとして新規書類に挿入するかを決定します。

- `syntaxName`

	書類を作成した際に自動的にセットするカラーリングモードを設定します。

- `width`,`height`

	SVGドキュメントのサイズを決定します。

### Preview, Validate on W3C, Open in..., Export to... で設定可能な値
- `showAlertDialog`
	デフォルト値：true (アラートを出す)
	
	セーブをせずに実行した際やファイルがSVGでなかった際に実行できない旨を知らせるアラートを表示するかを決定します。
	falseにした場合は、何も表示せずにスクリプトを中断します。
	

### Preview で設定可能な値
- `syntaxName`
	デフォルト値：SVG
	
	誤作動防止のためカラーリング・シンタックスがこの値のモードのときのみ実行されます。
	"XML"等、他のシンタックス・モードでSVGを編集している場合は書き換えてください。

- `resizeWindow`
	デフォルト値：false (リサイズしない)
	
	リロード時に最新のSVG画像サイズに合わせてウィンドウサイズを変更するかを決定します。
	
- `showToolbar`
	デフォルト値：false (表示しない)
	
	プレビューウィンドウのツールバーを表示するかを決定します。
	


### Embed Image... で設定可能な値
- `maxFileSize`

	容量の大きな画像を埋め込もうしたときの確認ダイアログを出すしきい値を変更できます。


ロードマップ
----------------------------------------------------
やりたいなと思ってること。気が向いたものから実装されます。されないかもしれません。

- 英語版README
- テンプレートをもう少し増やす
- Safariが立ち上がってない状態でプレビューを実行したときに多分うまくいかないのをどうにかする
- アラートをもう少し推敲する
- バリテーション詳細結果の出力先としてCotEdiorのスクリプトエラーウィンドウを選べるようにする
- ドキュメントを保存していなくてもプレビュー可能にする（需要あるのん？）
- ダイアログ等の日本語ローカライズ
- PDF, PNGなど他のフォーマットへの書き出し（前途多難）


開発環境
----------------------------------------------------
- OS X Lion 10.7.3
- Safari 5.1.3
- CotEditor 1.3.1


作者
----------------------------------------------------
1024jp

- website: [ヴォルフロッシュ](http://wolfrosch.com/)
- twitter: @[1024jp](https://twitter.com/1024jp)
- github : [1024jp](https://github.com/1024jp)


フィードバック
----------------------------------------------------
不具合や要望などありましたら、GitHub上や作者のTwitter等で気軽にご連絡下さい。
かならず対応することを保証はしませんが、前向きに検討させていただきます。
「便利に使ってるよ」というただの利用報告でもモチベーションが上がります。


ライセンス
----------------------------------------------------
本スクリプト・スイートは [クリエイティブ・コモンズ 表示 - 非営利 3.0 非移植 ライセンス](cc) の下に提供されています。
[cc]: http://creativecommons.org/licenses/by-nc/3.0/deed.ja
